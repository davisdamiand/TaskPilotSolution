<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TaskPilot.Client.MainPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#F5F5F7">

    <ScrollView>
        <VerticalStackLayout Padding="30,40" Spacing="25">

            <!-- HEADER -->
            <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,20">
                <VerticalStackLayout Spacing="5" VerticalOptions="Center">
                    <Label x:Name="LabelStudentName"
                           Text="Name"
                           FontSize="30"
                           FontAttributes="Bold"
                           TextColor="#1A1D3F" />
                    <Label Text="â€œStay focused. Keep working towards your goals â€” one task at a time.â€"
                           FontSize="14"
                           TextColor="#555" />
                </VerticalStackLayout>
            </Grid>

            <!-- ONGOING PROJECTS HEADER -->
            <Grid ColumnDefinitions="*,Auto">
                <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                    <Label Text="Ongoing Projects"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="#1A1D3F"/>
                </HorizontalStackLayout>

            </Grid>

            <!-- TASKS COLLECTION -->
            <CollectionView x:Name="TodosCollection"
                            ItemsSource="{Binding listOfTodos}"
                            SelectionMode="None"
                            Margin="0,15,0,0">

                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical"
                                     Span="1"
                                     VerticalItemSpacing="15"
                                     HorizontalItemSpacing="0" />
                </CollectionView.ItemsLayout>

                <!-- EMPTY STATE -->
                <CollectionView.EmptyView>
                    <VerticalStackLayout Padding="20"
                                         HorizontalOptions="Center"
                                         VerticalOptions="Center">
                        <Label Text="No tasks yet ðŸŽ‰"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#1A1D3F"
                               HorizontalOptions="Center"/>
                        <Label Text="Add your first task to get started."
                               FontSize="14"
                               TextColor="#666"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>

                <!-- TEMPLATE -->
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame BackgroundColor="White"
                               CornerRadius="16"
                               Padding="20"
                               BorderColor="Transparent"
                               HasShadow="True"
                               Margin="0,5">

                            <VerticalStackLayout Spacing="10">

                                <!-- TITLE AND MENU -->
                                <Grid ColumnDefinitions="*,Auto">
                                    <Label Text="{Binding Title}"
                                           FontSize="17"
                                           FontAttributes="Bold"
                                           TextColor="#1A1D3F"
                                           Grid.Column="0"/>
                                    <Label Text="â‹®"
                                           Grid.Column="1"
                                           FontSize="20"
                                           TextColor="#999"
                                           VerticalOptions="Center"/>
                                </Grid>

                                <!-- DUE DATE -->
                                <Label Text="{Binding DueDateTime, StringFormat='Due: {0:dd MMM yyyy}'}"
                                            FontSize="13"
                                            TextColor="#666" />

                                <!-- TIME SPENT -->
                                <Label Text="{Binding TimeSpentMinutes, StringFormat='Time Spent: {0} min'}"
                                       FontSize="12"
                                       TextColor="#555"/>

                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>