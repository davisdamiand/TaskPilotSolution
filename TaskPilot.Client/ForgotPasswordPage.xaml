<?xml version="1.0" encoding="utf-8" ?>
<ContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="TaskPilot.Client.ForgotPasswordPage"
    Shell.NavBarIsVisible="False"
    BackgroundColor="White">

    <ScrollView>
        <VerticalStackLayout
            Padding="30,80,30,60"
            Spacing="20"
            VerticalOptions="Center"
            HorizontalOptions="Center">

            <!-- Header -->
            <Label 
                Text="Reset Password"
                FontSize="26"
                FontAttributes="Bold"
                TextColor="#1E1E5A"
                HorizontalOptions="Center"
                HorizontalTextAlignment="Center"/>

            <!-- Instruction -->
            <Label 
                Text="Enter your email and date of birth to reset your password."
                FontSize="14"
                TextColor="#555"
                HorizontalOptions="Center"
                HorizontalTextAlignment="Center"
                Margin="0,0,0,20"/>

            <!-- Email Entry -->
            <Frame BackgroundColor="#F2F2F7" CornerRadius="10" HasShadow="False" Padding="10,5">
                <Entry x:Name="EntryEmail" Placeholder="Enter your email" Keyboard="Email"
                       TextColor="#1E1E5A" PlaceholderColor="#9FA4B2" BackgroundColor="Transparent"/>
            </Frame>

            <!-- DOB Entry -->
            <Frame BackgroundColor="#F2F2F7" CornerRadius="10" HasShadow="False" Padding="10,5">
                <Entry x:Name="EntryDOB" Placeholder="Enter your date of birth (YYYY-MM-DD)" Keyboard="Text"
                       TextColor="#1E1E5A" PlaceholderColor="#9FA4B2" BackgroundColor="Transparent"/>
            </Frame>

            <!-- Error Label -->
            <Label x:Name="ErrorLabel" TextColor="Red" FontSize="12" IsVisible="False"/>

            <!-- Verify Button -->
            <Button x:Name="ButtonVerify" Text="Verify" FontAttributes="Bold" FontSize="16"
                    TextColor="White" BackgroundColor="#1E1E5A" CornerRadius="10"
                    Padding="0,14" Clicked="OnVerifyClicked"/>

            <!-- New Password Section -->
            <StackLayout x:Name="NewPasswordSection" IsVisible="False" Spacing="15">

                <Frame BackgroundColor="#F2F2F7" CornerRadius="10" HasShadow="False" Padding="10,5">
                    <Entry x:Name="EntryNewPassword" Placeholder="Enter new password" IsPassword="True"
                           TextColor="#1E1E5A" PlaceholderColor="#9FA4B2" BackgroundColor="Transparent"/>
                </Frame>

                <Frame BackgroundColor="#F2F2F7" CornerRadius="10" HasShadow="False" Padding="10,5">
                    <Entry x:Name="EntryConfirmPassword" Placeholder="Confirm new password" IsPassword="True"
                           TextColor="#1E1E5A" PlaceholderColor="#9FA4B2" BackgroundColor="Transparent"/>
                </Frame>

                <Button x:Name="ButtonResetPassword" Text="Reset Password" FontAttributes="Bold" FontSize="16"
                        TextColor="White" BackgroundColor="#1E1E5A" CornerRadius="10"
                        Padding="0,14" Clicked="OnResetPasswordClicked"/>
            </StackLayout>

            <!-- Success Label -->
            <Label x:Name="MessageLabel" TextColor="Green" FontSize="13" FontAttributes="Bold"
                   IsVisible="False" HorizontalOptions="Center"/>

            <!-- Back to Login -->
            <HorizontalStackLayout HorizontalOptions="Center" Spacing="5" Margin="0,10,0,0">
                <Label Text="Remembered your password?" FontSize="13" TextColor="#555"/>
                <Button Text="Back to Login" FontSize="13" FontAttributes="Bold" TextColor="#1E1E5A"
                        BackgroundColor="Transparent" BorderWidth="0" Padding="0" Clicked="OnBackToLoginClicked"/>
            </HorizontalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
